#!/bin/bash
# location .local/bin/
# Usage: theme-switch nord | everforest

theme="$1"
theme_dir="$HOME/.config/themes/$theme"

if [ ! -d "$theme_dir" ]; then
  echo "Theme '$theme' not found."
  exit 1
fi

echo "Switching to theme: $theme"

# Waybar
ln -sf "$theme_dir/waybar.css" "$HOME/.config/waybar/theme.css"

# Kitty
ln -sf "$theme_dir/kitty.conf" "$HOME/.config/kitty/theme.conf"

# Hyprland
ln -sf "$theme_dir/hyprland.conf" "$HOME/.config/hypr/theme.conf"

# Rofi
ln -sf "$theme_dir/rofi.rasi" "$HOME/.config/rofi/theme.rasi"

# Swaync
ln -sf "$theme_dir/swaync.css" "$HOME/.config/swaync/theme.css"

# Tmux
ln -sf "$theme_dir/tmux.conf" "$HOME/.config/tmux/themes/theme.conf"

# Nvim
ln -sf "$theme_dir/nvim.lua" "$HOME/.config/nvim/lua/plugins/theme.lua"

# Zathura
ln -sf "$theme_dir/zathurarc" "$HOME/.config/zathura/zathurarc"

# Spotify
if [ "$theme" = "nord" ]; then
  spicetify config current_theme text
  spicetify config color_scheme Nord
fi

if [ "$theme" = "everforest" ]; then
  spicetify config current_theme text
  spicetify config color_scheme EverforestDarkMedium
fi

if [ "$theme" = "one-dark-pro" ]; then
  spicetify config current_theme text
  spicetify config color_scheme Dracula
fi

if [ "$theme" = "tokyo-night" ]; then
  spicetify config current_theme text
  spicetify config color_scheme TokyoNight
fi

if [ "$theme" = "gruvbox" ]; then
  spicetify config current_theme text
  spicetify config color_scheme Gruvbox
fi

if [ "$theme" = "catppuccin" ]; then
  spicetify config current_theme text
  spicetify config color_scheme CatppuccinMocha
fi
spicetify apply

# Waypaper
waypaper --folder Pictures/wallpapers/$theme --random
# waypaper --folder Pictures/wallpapers --restore

# Reload
pkill -USR2 waybar 2>/dev/null
pkill -USR1 kitty
hyprctl reload 2>/dev/null
swaync-client --reload-css
tmux source-file ~/.tmux.conf

notify-send "Theme switched to $theme!"
